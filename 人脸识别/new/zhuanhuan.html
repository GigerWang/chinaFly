<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>Document</title>
</head>
<body>
<canvas id="" width="" height=""></canvas>
</body>
	<script type="text/javascript">
		
		function getImgToBase64(url,callback){//将图片转换为Base64
		  var canvas = document.createElement('canvas'),
		    ctx = canvas.getContext('2d'),
		    img = new Image;
		  img.crossOrigin = 'Anonymous';
		  img.onload = function(){
		    canvas.height = img.height;
		    canvas.width = img.width;
		    ctx.drawImage(img,0,0);
		    var dataURL = canvas.toDataURL('image/png');
		    callback(dataURL);
		    canvas = null;
		  };
		  img.src = url;
		}
		
		function dataURLtoFile(dataurl, filename) {//将base64转换为文件
	        var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
	            bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
	        while(n--){
	            u8arr[n] = bstr.charCodeAt(n);
	        }
	        return new File([u8arr], filename, {type:mime});
    	}

			getImgToBase64('images/333.jpg',function(x){
				console.log(dataURLtoFile(x,''))
			})
	</script>
</html>
